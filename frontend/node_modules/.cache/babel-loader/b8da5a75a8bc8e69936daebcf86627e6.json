{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\dhaval agrawal\\\\OneDrive\\\\Desktop\\\\CodeMate-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\dhaval agrawal\\\\OneDrive\\\\Desktop\\\\CodeMate-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\dhaval agrawal\\\\OneDrive\\\\Desktop\\\\CodeMate-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from\"react\";import{useState}from\"react\";import AuthContext from\"../../contexts/authContext\";import img from'../../images/logo.svg';import{Container,FormWrap,FormContent,Form,FormH1,FormLabel,FormInput,FormButton,Text,Logo,Icon}from'./LoginElements';import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LogIn=function LogIn(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userName=_useState2[0],setUserName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var authCtx=React.useContext(AuthContext);var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch(\"http://127.0.0.1:5555/api/v1/users/login\",{method:\"POST\",withCredentials:true,headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:password})});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;if(data.status===\"error\"){window.alert(\"Login in failed. Please check your details.\");}else{authCtx.setUser({userName:userName});console.log(\"Login Successful\");history.push(\"/codepage\");}case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();// const handleSubmit = () => {\n//     authCtx.setUser({ userName: userName });\n//     history.push(\"/userhome\");\n// };\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(FormWrap,{children:[/*#__PURE__*/_jsx(Icon,{to:\"/\",children:/*#__PURE__*/_jsx(Logo,{src:img,alt:\"icon\"})}),/*#__PURE__*/_jsx(FormContent,{children:/*#__PURE__*/_jsxs(Form,{method:\"POST\",children:[/*#__PURE__*/_jsx(FormH1,{children:\"Welcome Back\"}),/*#__PURE__*/_jsx(FormLabel,{htmlFor:\"for\",children:\"Name\"}),/*#__PURE__*/_jsx(FormInput,{type:\"text\",value:userName,onChange:function onChange(e){setUserName(e.target.value);},required:true}),/*#__PURE__*/_jsx(FormLabel,{htmlFor:\"for\",children:\"Email\"}),/*#__PURE__*/_jsx(FormInput,{type:\"email\",value:email,onChange:function onChange(e){setEmail(e.target.value);},required:true}),/*#__PURE__*/_jsx(FormLabel,{htmlFor:\"for\",children:\"Password\"}),/*#__PURE__*/_jsx(FormInput,{type:\"password\",value:password,onChange:function onChange(e){setPassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(FormButton,{type:\"submit\",onClick:handleSubmit,children:\"Log In\"}),/*#__PURE__*/_jsx(Text,{to:\"/signup\",children:\"New To CodeMate. Please Register!\"})]})})]})})});};export default LogIn;","map":{"version":3,"sources":["C:/Users/dhaval agrawal/OneDrive/Desktop/CodeMate-master/frontend/src/components/Login/index.js"],"names":["React","useState","AuthContext","img","Container","FormWrap","FormContent","Form","FormH1","FormLabel","FormInput","FormButton","Text","Logo","Icon","useHistory","LogIn","userName","setUserName","email","setEmail","password","setPassword","authCtx","useContext","history","handleSubmit","e","preventDefault","fetch","method","withCredentials","headers","body","JSON","stringify","res","json","data","status","window","alert","setUser","console","log","push","target","value"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useState} from \"react\";\nimport AuthContext from \"../../contexts/authContext\";\nimport img from '../../images/logo.svg';\nimport { Container,FormWrap, FormContent, Form, FormH1,FormLabel,FormInput, FormButton, Text,Logo, Icon} from './LoginElements';\nimport { useHistory } from \"react-router-dom\";\n\nconst LogIn = () => {\n    const [userName, setUserName] = useState(\"\");\n    const [email,setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const authCtx = React.useContext(AuthContext);\n    const history = useHistory();\n\n\n    const handleSubmit = async (e) =>{\n            e.preventDefault();\n            const res = await fetch(\"http://127.0.0.1:5555/api/v1/users/login\",{\n            method:\"POST\",\n            withCredentials: true,\n            headers:{\n                \"Content-Type\":\"application/json\"\n            },\n            body: JSON.stringify({\n                email, password\n            })\n        });\n        const data = await res.json();\n        if(data.status === \"error\"){\n            window.alert(\"Login in failed. Please check your details.\");\n        }\n        else{\n            \n            authCtx.setUser({ userName: userName });\n            console.log(\"Login Successful\");\n            history.push(\"/codepage\");\n        }\n    }\n    // const handleSubmit = () => {\n    //     authCtx.setUser({ userName: userName });\n    //     history.push(\"/userhome\");\n    // };\n\n\n  return (\n    <>\n        <Container>\n            <FormWrap>\n                <Icon to='/'><Logo src={img} alt=\"icon\"/></Icon>\n                <FormContent>\n                    <Form method=\"POST\" >\n                        <FormH1>Welcome Back</FormH1>\n                        <FormLabel htmlFor='for'>Name</FormLabel>\n                        <FormInput \n                            type='text' \n                            value={userName}\n                            onChange={(e) => {\n                                setUserName(e.target.value);\n                            }}\n                            required\n                        />\n                        <FormLabel htmlFor='for'>Email</FormLabel>\n                        <FormInput type='email' \n                        value={email} \n                        onChange={(e) => {\n                            setEmail(e.target.value);\n                        }}\n                        required \n                        />\n                        <FormLabel htmlFor='for'>Password</FormLabel>\n                        <FormInput type='password'  \n                        value={password} \n                        onChange={(e) => {\n                            setPassword(e.target.value);\n                        }}\n                        required\n                        />\n                        <FormButton type='submit' onClick={handleSubmit}>Log In</FormButton>\n                        <Text to=\"/signup\">New To CodeMate. Please Register!</Text>\n\n                    </Form>\n                </FormContent>\n            </FormWrap>\n        </Container>\n    </>\n  )\n}\n\nexport default LogIn;"]},"metadata":{},"sourceType":"module"}