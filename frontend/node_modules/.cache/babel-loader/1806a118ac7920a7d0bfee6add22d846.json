{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\dhaval agrawal\\\\OneDrive\\\\Desktop\\\\CodeMate-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\dhaval agrawal\\\\OneDrive\\\\Desktop\\\\CodeMate-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\dhaval agrawal\\\\OneDrive\\\\Desktop\\\\CodeMate-master\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from'react';import{useState}from'react';import AuthContext from'../../contexts/authContext';import img from'../../images/logo.svg';import{Container,FormWrap,FormContent,Form,FormH1,FormLabel,FormInput,FormButton,Text,Logo,Icon}from'./LoginElements';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LogIn=function LogIn(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),userName=_useState2[0],setUserName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var authCtx=React.useContext(AuthContext);var history=useHistory();var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch('/api/v1/users/login',{method:'POST',withCredentials:true,headers:{'Content-Type':'application/json'},body:JSON.stringify({email:email,password:password})});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;if(data.status==='error'){window.alert('Login in failed. Please check your details.');}else{authCtx.setUser({userName:userName});console.log('Login Successful');history.push('/codepage');}case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();// const handleSubmit = () => {\n//     authCtx.setUser({ userName: userName });\n//     history.push(\"/userhome\");\n// };\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(FormWrap,{children:[/*#__PURE__*/_jsx(Icon,{to:\"/\",children:/*#__PURE__*/_jsx(Logo,{src:img,alt:\"icon\"})}),/*#__PURE__*/_jsx(FormContent,{children:/*#__PURE__*/_jsxs(Form,{method:\"POST\",children:[/*#__PURE__*/_jsx(FormH1,{children:\"Welcome Back\"}),/*#__PURE__*/_jsx(FormLabel,{htmlFor:\"for\",children:\"Name\"}),/*#__PURE__*/_jsx(FormInput,{type:\"text\",value:userName,onChange:function onChange(e){setUserName(e.target.value);},required:true}),/*#__PURE__*/_jsx(FormLabel,{htmlFor:\"for\",children:\"Email\"}),/*#__PURE__*/_jsx(FormInput,{type:\"email\",value:email,onChange:function onChange(e){setEmail(e.target.value);},required:true}),/*#__PURE__*/_jsx(FormLabel,{htmlFor:\"for\",children:\"Password\"}),/*#__PURE__*/_jsx(FormInput,{type:\"password\",value:password,onChange:function onChange(e){setPassword(e.target.value);},required:true}),/*#__PURE__*/_jsx(FormButton,{type:\"submit\",onClick:handleSubmit,children:\"Log In\"}),/*#__PURE__*/_jsx(Text,{to:\"/signup\",children:\"New To CodeMate. Please Register!\"})]})})]})})});};export default LogIn;","map":{"version":3,"sources":["C:/Users/dhaval agrawal/OneDrive/Desktop/CodeMate-master/frontend/src/components/Login/index.js"],"names":["React","useState","AuthContext","img","Container","FormWrap","FormContent","Form","FormH1","FormLabel","FormInput","FormButton","Text","Logo","Icon","useHistory","LogIn","userName","setUserName","email","setEmail","password","setPassword","authCtx","useContext","history","handleSubmit","e","preventDefault","fetch","method","withCredentials","headers","body","JSON","stringify","res","json","data","status","window","alert","setUser","console","log","push","target","value"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useState } from 'react'\nimport AuthContext from '../../contexts/authContext'\nimport img from '../../images/logo.svg'\nimport {\n  Container,\n  FormWrap,\n  FormContent,\n  Form,\n  FormH1,\n  FormLabel,\n  FormInput,\n  FormButton,\n  Text,\n  Logo,\n  Icon,\n} from './LoginElements'\nimport { useHistory } from 'react-router-dom'\n\nconst LogIn = () => {\n  const [userName, setUserName] = useState('')\n  const [email, setEmail] = useState('')\n  const [password, setPassword] = useState('')\n  const authCtx = React.useContext(AuthContext)\n  const history = useHistory()\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    const res = await fetch('/api/v1/users/login', {\n      method: 'POST',\n      withCredentials: true,\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        email,\n        password,\n      }),\n    })\n    const data = await res.json()\n    if (data.status === 'error') {\n      window.alert('Login in failed. Please check your details.')\n    } else {\n      authCtx.setUser({ userName: userName })\n      console.log('Login Successful')\n      history.push('/codepage')\n    }\n  }\n  // const handleSubmit = () => {\n  //     authCtx.setUser({ userName: userName });\n  //     history.push(\"/userhome\");\n  // };\n\n  return (\n    <>\n      <Container>\n        <FormWrap>\n          <Icon to='/'>\n            <Logo src={img} alt='icon' />\n          </Icon>\n          <FormContent>\n            <Form method='POST'>\n              <FormH1>Welcome Back</FormH1>\n              <FormLabel htmlFor='for'>Name</FormLabel>\n              <FormInput\n                type='text'\n                value={userName}\n                onChange={(e) => {\n                  setUserName(e.target.value)\n                }}\n                required\n              />\n              <FormLabel htmlFor='for'>Email</FormLabel>\n              <FormInput\n                type='email'\n                value={email}\n                onChange={(e) => {\n                  setEmail(e.target.value)\n                }}\n                required\n              />\n              <FormLabel htmlFor='for'>Password</FormLabel>\n              <FormInput\n                type='password'\n                value={password}\n                onChange={(e) => {\n                  setPassword(e.target.value)\n                }}\n                required\n              />\n              <FormButton type='submit' onClick={handleSubmit}>\n                Log In\n              </FormButton>\n              <Text to='/signup'>New To CodeMate. Please Register!</Text>\n            </Form>\n          </FormContent>\n        </FormWrap>\n      </Container>\n    </>\n  )\n}\n\nexport default LogIn\n"]},"metadata":{},"sourceType":"module"}